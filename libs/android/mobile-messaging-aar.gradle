boolean getSetting(String name, boolean defaultValue) {
    if (project.hasProperty(name)) {
        return project.property(name).toBoolean()
    } else if (System.getenv(name) != null) {
        return System.getenv(name).toBoolean()
    }
    return defaultValue
}

def infobipExcludeAndroidSupport = getSetting("infobipExcludeAndroidSupport", false)
def infobipExcludeGms = getSetting("infobipExcludeGms", false)

if (!infobipExcludeAndroidSupport) {
    repositories {
        maven {
            url 'https://maven.google.com/'
            name 'Google'
        }
    }
}

dependencies {
    def mmVersion = '1.9.7'
    compile "org.infobip.mobile.messaging.api:infobip-mobile-messaging-android-interactive-sdk:$mmVersion@aar"
    compile "org.infobip.mobile.messaging.api:infobip-mobile-messaging-android-geo-sdk:$mmVersion@aar"
    compile("org.infobip.mobile.messaging.api:infobip-mobile-messaging-android-sdk:$mmVersion@aar") {
        transitive = true; 
        if (infobipExcludeAndroidSupport) {    
            exclude group: 'com.android.support', module: 'support-v4'
            exclude group: 'com.android.support', module: 'appcompat-v7'
        }
        if (infobipExcludeGms) {
            exclude group: 'com.google.android.gms', module: 'play-services-gcm'
            exclude group: 'com.google.android.gms', module: 'play-services-location'
        }
    }
}